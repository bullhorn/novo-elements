<form [formGroup]="innerForm">
  <novo-stack [formArrayName]="controlName" class="criteria-builder-inner">
    @for (andGroup of root.controls; track andGroup; let andIndex = $index; let isFirst = $first; let isLastAnd = $last) {
      @if (!isFirst) {
        <novo-label color="ash" size="xs" uppercase padding="sm">{{ qbs.hasMultipleScopes() ? conditionGroup.scope + ' ' + labels.filterss : qbs.getConjunctionLabel('and') }}</novo-label>
      }
      <novo-condition-group [hideFirstOperator]="hideFirstOperator" [canBeEmpty]="canBeEmpty" [groupIndex]="andIndex" [formGroupName]="andIndex" #conditionGroup></novo-condition-group>
    }
  </novo-stack>
  @if (qbs.hasMultipleScopes()) {
    <novo-tabbed-group-picker
      [tabs]="tabbedGroupPickerTabs()"
      [selectionEnabled]="false"
      [buttonConfig]="addButtonConfig"
      (activation)="onFieldSelect($event)">
    </novo-tabbed-group-picker>
  }
</form>
<novo-condition-templates [addressConfig]="addressConfig" [dateConfig]="dateConfig"/>

<!--
  {
    $and: [{
      $or: [{
        entity: 'JobOrder'
        field: 'categories',
        operator: 'doesNotContain',
        value: 'Healthcare'
      }]
    }]
  }
 -->
